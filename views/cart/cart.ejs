<%- include("../meta/meta", {title: "Your Cart" }) %>
    <link rel="stylesheet" href="/static/styles/cart.css">

    <script src="/static/scripts/cart.management.js" defer></script>

    </head>

    <body>
        <%- include("../layouts/header") %>
            <main class="cart-view-main">
                <h1>
                    Your Cart
                </h1>
                <% let price=0; %>
                    <ul class="cart-items">
                        <% for(const id in locals.carts) { %>
                            <% price +=+locals.carts[id].price * locals.carts[id].count %>
                                <li>
                                    <%- include("item", {item: locals.carts[id]}) %>
                                </li>
                                <% } %>
                    </ul>
                    <div class="cart-order">
                        <div>
                            <strong>
                                Total: â‚©
                            </strong>
                            <span id="cart-totalPrice">
                                <%= price %>
                            </span>
                        </div>
                        <% if(locals.isLogin) { %>
                            <form action="/order" method="POST">
                                <input type="hidden" name="_csrf" id="_csrf" value="<%= locals.csrf %>">
                                <button class="btn">Order</button>
                            </form>
                            <% } else { %>
                                <button class="btn" type="button" disabled>Login First</button>
                                <% } %>
                    </div>
            </main>
            <%- include("../layouts/footer") %>